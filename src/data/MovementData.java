package data;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

public class MovementData {
	private List<SensorReading> sensorData;
	
	/** Constructor with file name generated by hardware **/
	public MovementData(String fileName) {
		this.sensorData = buildMovementData(fileName);
	}
	
	/** Read data from sample file generated by hardware **/
	private List<SensorReading> buildMovementData(String fileName) {
			List<SensorReading> store = new ArrayList<SensorReading>();		
			
			// read from a file
			try (BufferedReader br = new BufferedReader(new FileReader(fileName))) { 
				String sCurrentLine;	 
				while ((sCurrentLine = br.readLine()) != null) {
					List<Integer> tempArray = new ArrayList<Integer>();
					String[] sr = sCurrentLine.split(",");
					for(int i=0; i<sr.length; i++) {
						if(isNumeric(sr[i])) {
							int num = Integer.parseInt(sr[i]);
							tempArray.add(num);
							//System.out.println(num);
						}
					}					
					SensorReading tempReading = new SensorReading(tempArray);
					store.add(tempReading);
				}
	 
			} catch (IOException e) {
				e.printStackTrace();
			}
			return store;		
	}
	
	public boolean isNumeric(String str)  
	{  
	  try  
	  {  
	    double d = Double.parseDouble(str);  
	  }  
	  catch(NumberFormatException nfe)  
	  {  
	    return false;  
	  }  
	  return true;  
	}
	
	public boolean validate() {
		//TODO Miya
		
		return true;
	}
	
	public void next() {
		//TODO  Miya
	}
	
	public void previous() {
		//TODO Miya
	}

	public List<SensorReading> getSensorData() {
		return sensorData;
	}

	public void setSensorData(List<SensorReading> sensorData) {
		this.sensorData = sensorData;
	}
}
